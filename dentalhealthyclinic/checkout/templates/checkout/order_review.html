{% extends 'base.html' %}

{% block content %}
  <h2>Review Your Order</h2>

  <div>
    <h3>Shipping Address</h3>
    <p>{{ order.shipping_address.address }}</p>
    <p>{{ order.shipping_address.address2 }}</p>
    <p>{{ order.shipping_address.town_or_city }}, {{ order.shipping_address.county }}</p>
    <p>{{ order.shipping_address.postcode }}</p>
    <p>{{ order.shipping_address.country }}</p>
    <p>Phone: {{ order.shipping_address.phone_number }}</p>
  </div>

  <div>
    <h3>Order Items</h3>
    <table>
      <thead>
        <tr>
          <th>Product</th>
          <th>Quantity</th>
          <th>Price</th>
          <th>Total</th>
        </tr>
      </thead>
      <tbody>
        {% for item in order.lineitems.all %}
          <tr>
            <td>{{ item.product.name }}</td>
            <td>{{ item.quantity }}</td>
            <td>${{ item.price }}</td>
            <td>${{ item.lineitem_total }}</td>
          </tr>
        {% endfor %}
      </tbody>
      <tfoot>
        <tr>
          <td colspan="3">Order Total:</td>
          <td>${{ order.grand_total }}</td>
        </tr>
      </tfoot>
    </table>
  </div>

  <div>
    <h3>Payment Method</h3>
    <p>{{ order.payment_method }}</p>
  </div>

  <a href="{% url 'checkout:order_confirmation' %}">Confirm Order</a>
{% endblock %}